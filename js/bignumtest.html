<html>
<body>

<script src="bignum.js"></script>
<script src="bignum_add.js"></script>
<script src="bignum_sub.js"></script>
<script src="bignum_mul.js"></script>
<script src="bignum_div.js"></script>
<script src="bignum_mod.js"></script>
<script src="bignum_scan.js"></script>
<script src="bignum_str.js"></script>

<script>
var stdout;

function
run()
{
        stdout = document.getElementById("stdout");
	stdout.innerHTML = "";

	test_bignum_add();
	test_bignum_sub();

	printline("ok");
}

function
test_bignum_add()
{
	var a, b, s, u, v, w;

	printline("Testing bignum_add");

	for (i = 0; i < 10000; i++) {
		a = Math.floor(Math.random() * BIGM);
		b = Math.floor(Math.random() * BIGM);
		u = bignum_scan(String(a));
		v = bignum_scan(String(b));
		w = bignum_add(u, v);
		s = bignum_str(w);
		if (a + b != Number(s)) {
			printline("fail");
			break;
		}
	}

	for (i = 0; i < 10000; i++) {
		a = Math.floor(Math.random() * 100 * BIGM);
		b = Math.floor(Math.random() * 100 * BIGM);
		u = bignum_scan(String(a));
		v = bignum_scan(String(b));
		w = bignum_add(u, v);
		s = bignum_str(w);
		if (a + b != Number(s)) {
			printline("fail");
			break;
		}
	}
}

function
test_bignum_sub()
{
	var a, b, s, t, u, v, w;

	printline("Testing bignum_sub");

	for (i = 0; i < 10000; i++) {
		a = Math.floor(Math.random() * BIGM);
		b = Math.floor(Math.random() * BIGM);
		if (a < b) {
			t = a;
			a = b;
			b = t;
		}
		u = bignum_scan(String(a));
		v = bignum_scan(String(b));
		w = bignum_sub(u, v);
		s = bignum_str(w);
		if (a - b != Number(s)) {
			printline("fail");
			break;
		}
	}

	for (i = 0; i < 10000; i++) {
		a = Math.floor(Math.random() * 100 * BIGM);
		b = Math.floor(Math.random() * 100 * BIGM);
		if (a < b) {
			t = a;
			a = b;
			b = t;
		}
		u = bignum_scan(String(a));
		v = bignum_scan(String(b));
		w = bignum_sub(u, v);
		s = bignum_str(w);
		if (a - b != Number(s)) {
			printline("fail");
			break;
		}
	}
}

function
printline(s)
{
	stdout.innerHTML += s + "<br>";
}
</script>

<table><tr><td>
<textarea id="stdin" rows="24" cols="80" style="font-family:courier;font-size:12pt">
</textarea>
</td><td>
<button onclick="run()" style="font-size:20pt">Run</button>
</td></tr></table>

<p>
<div id="stdout"></div>

</body>
</html>
