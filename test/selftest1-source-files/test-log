"Testing log"

clear

check(log(exp(x)) == x)

-- compare intrinsic

for(x,1,10,
  d = float(log(x/3)) - log(float(x/3)),
  check(abs(d) < 1.0 10^(-6))
)

-- negative arg

check(abs(exp(log(-0.7)) + 0.7) < 1.0 10^(-6))

-- complex arg

z1 =  0.2 + 0.3 i
z2 =  0.2 - 0.3 i
z3 = -0.2 + 0.3 i
z4 = -0.2 - 0.3 i

check(infixform(exp(log(z1))) == infixform(z1))
check(infixform(exp(log(z2))) == infixform(z2))
check(infixform(exp(log(z3))) == infixform(z3))
check(infixform(exp(log(z4))) == infixform(z4))
